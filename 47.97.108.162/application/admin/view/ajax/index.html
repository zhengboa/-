<!DOCTYPE html>
<html>

<head>

    <title>四人分配宿舍</title>
    <meta charset="UTF-8" />
    <!--
             js验证
         -->
    <script src="https://cdn.staticfile.org/jquery/1.8.3/jquery.min.js"></script>
    <script type="text/javascript">

        function validate_required(filed, alerttxt) {
            with (filed) {
                if (value == null || value == "") {
                    alert(alerttxt);
                    return false;
                } else {
                    return true;
                }
            }
        }


        function validate_form(thisform) {
            with (thisform) {
                if (validate_required(StudentNumber, "学生学号不能为空") == false) {
                    StudentNumber.focus();
                    return false;
                }
                if (validate_required(StudentNumber1, "同住人1学号不能为空") == false) {
                    StudentNumber.focus();
                    return false;
                }
                if (validate_required(StudentCode1, "同住人1邀请码不能为空") == false) {
                    StudentNumber.focus();
                    return false;
                }
                if (validate_required(StudentNumber2, "同住人2学号不能为空") == false) {
                    StudentNumber.focus();
                    return false;
                }
                if (validate_required(StudentCode2, "同住人2邀请码不能为空") == false) {
                    StudentNumber.focus();
                    return false;
                }
                if (validate_required(StudentNumber3, "同住人3学号不能为空") == false) {
                    StudentNumber.focus();
                    return false;
                }
                if (validate_required(StudentCode3, "同住人3邀请码不能为空") == false) {
                    StudentNumber.focus();
                    return false;
                }

                $.ajax({
                    url: "http://localhost:8080/check",
                    type: 'POST',
                    dataType: 'json',
                    data: {
                        "studentNumber" : StudentNumber.value,
                        "studentNumber1" : StudentNumber1.value,
                        "studentNumber2" : StudentNumber2.value,
                        "studentNumber3" : StudentNumber3.value,
                        "studentCode1" : StudentCode1.value,
                        "studentCode2" : StudentCode2.value,
                        "studentCode3" : StudentCode3.value,
                    },
                    success: function (res) {
                        console.log(res.data);
                        if(res.code == 1) {
                            return true;
                        } else if(res.code == -1) {
                            StudentNumber.focus();
                            alert(res.msg);
                            return false;
                        }
                    },
                    error : function(res) {
                        StudentNumber.focus();
                        alert("学号输入错误");
                        console.log(res.data)
                        return false;
                    }
                });
            }
        }
    </script>
</head>
<!--
onSubmit="return validate(this)"这句，是一个验证表单的功能。当validate()这个函数返回值是true的时候，表单提交，反之则不提交。
-->

<body>
<form onsubmit="return validate_form(this) "  action="/internet/suc.html" method="post">
    <div class="1">
        <div class="1.1">
            <div>
                <label>本人学号</label>
            </div>
            <div>
                <input type="text" placeholder="请输入学号" name="StudentNumber">
            </div>
        </div>

        <div class="1.2">
            <div>
                <label>申请楼号</label>
            </div>
            <div>
                <select>
                    <option value="5">五号楼</option>
                    <option value="8">八号楼</option>
                    <option value="9">九号楼</option>
                    <option value="13">十三号楼</option>
                    <option value="14">十四号楼</option>
                </select>
            </div>
        </div>

        <div class="1.3">
            <div>
                <label>同住人1学号</label>
            </div>
            <div>
                <input type="text" value="" name="StudentNumber1">
            </div>
            <div>
                <label>同住人1邀请码</label>
            </div>
            <div>
                <input type="text" value="" name="StudentCode1">
            </div>
        </div>

        <div class="1.4">
            <div>
                <label>同住人2学号</label>
            </div>
            <div>
                <input typ e="text" value="" placeholder="" name="StudentNumber2">
            </div>
            <div>
                <label>同住人2邀请码</label>
            </div>
            <div>
                <input type="text" value="" name="StudentCode2">
            </div>
        </div>

        <div class="1.5">
            <div>
                <label>同住人3学号</label>
            </div>
            <div>
                <input type="text" value="" placeholder="" name="StudentNumber3">
            </div>
            <div>
                <label>同住人3邀请码</label>
            </div>
            <div>
                <input type="text" value="" name="StudentCode3">
            </div>
        </div>

    </div>


    <div class="2">

        <input type="submit" name="sub" id="sub" value="提交" />
    </div>
</form>

</body>

</html>